<!doctype html><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=yes name=apple-mobile-web-app-capable><meta content=$pay.stronghold.co/1a136a73a59d52b475b94e49fdea69dae89 name=monetization><title>JS13KGame 2019: Theme "Back"!</title><script src=https://aframe.io/releases/0.9.2/aframe.min.js></script><style>body,html{width:100%;height:100%;margin:0;padding:0}</style><script>(function(){'use strict';function a(a,c){b(a,c)}function b(a,b){Object.keys(b).forEach(c=>{const d=b[c];a.setAttribute(c,d)})}const c={HEART:["moveTo",[.528,.097],"bezierCurveTo",[.58,.032,.644,0,.722,0],"bezierCurveTo",[.798,0,.864,.032,.919,.097],"lineTo",[.922,.097],"bezierCurveTo",[.974,.161,1,.236,1,.322],"bezierCurveTo",[1,.395,.982,.458,.944,.512],"lineTo",[.919,.547],"lineTo",[.539,.981],"lineTo",[.5,1],"bezierCurveTo",[.485,1,.472,.994,.461,.981],"lineTo",[.081,.547],"lineTo",[.056,.512],"bezierCurveTo",[.019,.458,0,.395,0,.322],"bezierCurveTo",[0,.236,.027,.161,.081,.097],"bezierCurveTo",[.136,.032,.202,0,.278,0],"bezierCurveTo",[.356,0,.42,.032,.472,.097],"lineTo",[.5,.134],"lineTo",[.528,.097]],PENCIL:["moveTo",[.333,.946],"lineTo",[.054,1],"lineTo",[0,.946],"lineTo",[.054,.667],"lineTo",[.721,0],"lineTo",[1,.277],"lineTo",[.333,.946]],BRUSH:["moveTo",[.901,0],"lineTo",[1,.098],"bezierCurveTo",[.678,.664,.427,.905,.248,.823],"lineTo",[.202,.774],"bezierCurveTo",[.139,.567,.372,.309,.901,0],"moveTo",[.097,.764],"lineTo",[.1,.761],"bezierCurveTo",[.119,.741,.141,.731,.168,.731],"bezierCurveTo",[.195,.73,.219,.74,.239,.76],"bezierCurveTo",[.258,.78,.267,.805,.267,.834],"bezierCurveTo",[.267,.863,.258,.887,.239,.907],"lineTo",[.236,.91],"bezierCurveTo",[.195,.953,.154,.983,.11,1],"lineTo",[.016,.997],"bezierCurveTo",[-.004,.977,-.005,.944,.012,.897],"bezierCurveTo",[.028,.851,.056,.807,.097,.764]],SOMETHING:["moveTo",[.857,.45],"bezierCurveTo",[.857,.464,.85,.476,.836,.486],"bezierCurveTo",[.821,.495,.805,.5,.786,.5],"lineTo",[.7,.5],"lineTo",[.691,.506],"bezierCurveTo",[.751,.524,.805,.549,.854,.581],"bezierCurveTo",[.951,.647,1,.727,1,.821],"bezierCurveTo",[1,.871,.951,.913,.854,.948],"bezierCurveTo",[.757,.983,.639,1,.5,1],"bezierCurveTo",[.362,1,.244,.983,.146,.948],"bezierCurveTo",[.05,.913,.001,.871,0,.821],"bezierCurveTo",[0,.727,.049,.647,.146,.581],"bezierCurveTo",[.195,.549,.249,.524,.309,.506],"lineTo",[.3,.5],"lineTo",[.214,.5],"bezierCurveTo",[.194,.5,.177,.495,.162,.486],"bezierCurveTo",[.149,.476,.143,.464,.143,.45],"lineTo",[.143,.051],"bezierCurveTo",[.143,.037,.149,.025,.162,.015],"bezierCurveTo",[.177,.005,.194,0,.214,0],"lineTo",[.786,0],"bezierCurveTo",[.805,0,.821,.005,.836,.015],"bezierCurveTo",[.85,.025,.857,.037,.857,.05],"lineTo",[.857,.45]],KEY:["moveTo",[.867,.098],"bezierCurveTo",[.868,.119,.865,.137,.857,.153],"lineTo",[.982,.296],"bezierCurveTo",[1.006,.324,1.006,.352,.982,.38],"lineTo",[.954,.411],"lineTo",[.941,.42],"lineTo",[.929,.413],"lineTo",[.91,.391],"lineTo",[.844,.47],"lineTo",[.863,.49],"lineTo",[.867,.503],"lineTo",[.861,.518],"lineTo",[.835,.55],"bezierCurveTo",[.809,.579,.784,.579,.76,.55],"lineTo",[.635,.406],"lineTo",[.516,.547],"bezierCurveTo",[.54,.592,.557,.641,.566,.693],"lineTo",[.563,.695],"bezierCurveTo",[.578,.791,.559,.867,.505,.924],"bezierCurveTo",[.455,.987,.387,1.011,.303,.995],"bezierCurveTo",[.236,.982,.175,.946,.12,.889],"lineTo",[.109,.875],"bezierCurveTo",[.051,.811,.016,.738,.004,.657],"lineTo",[.004,.655],"bezierCurveTo",[-.001,.624,-.001,.595,.003,.57],"bezierCurveTo",[.006,.51,.026,.46,.063,.42],"bezierCurveTo",[.099,.377,.143,.354,.194,.348],"lineTo",[.266,.351],"lineTo",[.27,.351],"bezierCurveTo",[.313,.36,.354,.379,.392,.406],"lineTo",[.727,.021],"bezierCurveTo",[.74,.004,.759,-.003,.783,.001],"bezierCurveTo",[.805,.004,.824,.015,.839,.034],"lineTo",[.852,.048],"bezierCurveTo",[.862,.062,.867,.079,.867,.098]],DIAMOND:["moveTo",[.98,.234],"bezierCurveTo",[.992,.246,.999,.263,1,.284],"bezierCurveTo",[1.001,.302,.996,.32,.986,.336],"lineTo",[.547,.976],"lineTo",[.518,1],"lineTo",[.483,1],"bezierCurveTo",[.471,.995,.462,.987,.454,.976],"lineTo",[.015,.336],"bezierCurveTo",[.004,.32,-.001,.302,0,.284],"bezierCurveTo",[.001,.265,.007,.249,.018,.236],"lineTo",[.194,.022],"bezierCurveTo",[.206,.007,.22,0,.236,0],"lineTo",[.75,0],"bezierCurveTo",[.766,0,.78,.007,.791,.02],"lineTo",[.98,.234]],JOYSTICK:["moveTo",[.5,0],"bezierCurveTo",[.634,0,.749,.03,.843,.089],"bezierCurveTo",[.95,.155,1.002,.236,1,.334],"bezierCurveTo",[1.003,.43,.951,.511,.843,.577],"lineTo",[.845,.577],"bezierCurveTo",[.799,.606,.749,.628,.695,.643],"lineTo",[.695,.889],"bezierCurveTo",[.695,.92,.684,.947,.663,.969],"lineTo",[.66,.971],"bezierCurveTo",[.638,.99,.612,1,.584,1],"lineTo",[.417,1],"bezierCurveTo",[.386,1,.36,.99,.339,.971],"lineTo",[.336,.967],"bezierCurveTo",[.316,.945,.306,.919,.306,.889],"lineTo",[.306,.643],"bezierCurveTo",[.251,.628,.201,.606,.156,.577],"bezierCurveTo",[.05,.511,-.002,.43,0,.334],"bezierCurveTo",[-.002,.236,.05,.155,.156,.089],"bezierCurveTo",[.251,.03,.366,0,.5,0]],DPAD:["moveTo",[1,.333],"lineTo",[1,.667],"bezierCurveTo",[1,.681,.994,.694,.983,.706],"bezierCurveTo",[.972,.717,.959,.722,.944,.722],"lineTo",[.722,.722],"lineTo",[.722,.944],"bezierCurveTo",[.722,.96,.717,.974,.706,.985],"bezierCurveTo",[.694,.995,.681,1,.667,1],"lineTo",[.333,1],"bezierCurveTo",[.318,1,.304,.995,.293,.985],"bezierCurveTo",[.283,.974,.278,.96,.278,.944],"lineTo",[.278,.722],"lineTo",[.056,.722],"bezierCurveTo",[.04,.722,.026,.717,.015,.706],"bezierCurveTo",[.005,.694,0,.681,0,.667],"lineTo",[0,.333],"bezierCurveTo",[0,.318,.005,.304,.015,.293],"bezierCurveTo",[.026,.283,.04,.278,.056,.278],"lineTo",[.278,.278],"lineTo",[.278,.057],"bezierCurveTo",[.278,.041,.283,.028,.293,.017],"bezierCurveTo",[.304,.006,.318,0,.333,0],"lineTo",[.667,0],"bezierCurveTo",[.681,0,.694,.006,.706,.017],"bezierCurveTo",[.717,.028,.722,.041,.722,.056],"lineTo",[.722,.278],"lineTo",[.943,.278],"bezierCurveTo",[.959,.278,.972,.283,.983,.293],"bezierCurveTo",[.994,.304,1,.318,1,.333]],TURNARROW:["moveTo",[.29,.238],"bezierCurveTo",[.29,.405,.351,.547,.474,.665],"bezierCurveTo",[.532,.72,.596,.763,.667,.794],"bezierCurveTo",[.719,.815,.775,.829,.834,.835],"lineTo",[.834,.714],"lineTo",[1,.714],"lineTo",[1,1],"lineTo",[.917,.998],"bezierCurveTo",[.829,.998,.745,.986,.667,.962],"bezierCurveTo",[.551,.927,.447,.865,.356,.778],"bezierCurveTo",[.202,.63,.124,.45,.124,.238],"lineTo",[0,.238],"lineTo",[.207,0],"lineTo",[.414,.238],"lineTo",[.29,.238]],UARROW:["moveTo",[.769,.202],"lineTo",[.779,.208],"bezierCurveTo",[.926,.297,1,.407,1,.536],"bezierCurveTo",[1,.665,.926,.774,.779,.865],"bezierCurveTo",[.631,.954,.451,.999,.239,.999],"lineTo",[.159,1],"lineTo",[.159,.822],"lineTo",[.318,.822],"lineTo",[.318,.9],"bezierCurveTo",[.452,.89,.568,.855,.666,.796],"bezierCurveTo",[.783,.724,.841,.637,.841,.536],"bezierCurveTo",[.841,.434,.783,.348,.666,.277],"lineTo",[.656,.271],"lineTo",[.658,.271],"bezierCurveTo",[.541,.203,.402,.169,.239,.169],"lineTo",[.239,.242],"lineTo",[0,.121],"lineTo",[.239,0],"lineTo",[.239,.073],"bezierCurveTo",[.444,.073,.62,.115,.767,.201],"lineTo",[.767,.202],"lineTo",[.769,.202]],CHECKMARK:["moveTo",[.234,.209],"bezierCurveTo",[.246,.21,.257,.216,.266,.226],"lineTo",[.423,.439],"lineTo",[.736,.019],"bezierCurveTo",[.743,.009,.753,.002,.765,0],"bezierCurveTo",[.778,-.001,.789,.003,.798,.012],"lineTo",[.984,.193],"bezierCurveTo",[.994,.201,.999,.212,1,.226],"bezierCurveTo",[1.001,.24,.998,.253,.991,.265],"lineTo",[.459,.984],"lineTo",[.437,1],"lineTo",[.412,1],"lineTo",[.388,.984],"lineTo",[.011,.474],"bezierCurveTo",[.003,.462,-.001,.45,0,.437],"bezierCurveTo",[.001,.421,.007,.41,.016,.401],"lineTo",[.201,.221],"bezierCurveTo",[.211,.211,.222,.207,.234,.209]],HOUSE:["moveTo",[.375,1],"lineTo",[.188,1],"bezierCurveTo",[.17,1,.155,.994,.142,.983],"bezierCurveTo",[.131,.97,.125,.955,.125,.938],"lineTo",[.125,.625],"lineTo",[0,.625],"lineTo",[0,.5],"lineTo",[.5,0],"lineTo",[1,.5],"lineTo",[1,.625],"lineTo",[.875,.625],"lineTo",[.875,.938],"bezierCurveTo",[.875,.955,.869,.97,.856,.983],"bezierCurveTo",[.844,.994,.829,1,.813,1],"lineTo",[.625,1],"lineTo",[.625,.625],"lineTo",[.375,.625],"lineTo",[.375,1]],MUSICNOTE:["moveTo",[1,.094],"lineTo",[1,.581],"lineTo",[1,.592],"bezierCurveTo",[.993,.651,.968,.7,.926,.737],"lineTo",[.922,.737],"bezierCurveTo",[.878,.78,.825,.804,.765,.808],"lineTo",[.763,.808],"bezierCurveTo",[.7,.814,.647,.797,.606,.758],"bezierCurveTo",[.565,.724,.547,.678,.554,.62],"bezierCurveTo",[.56,.568,.584,.523,.628,.484],"bezierCurveTo",[.67,.447,.715,.426,.765,.42],"lineTo",[.815,.42],"lineTo",[.815,.258],"lineTo",[.444,.258],"lineTo",[.444,.807],"bezierCurveTo",[.447,.848,.422,.889,.368,.929],"lineTo",[.367,.934],"bezierCurveTo",[.322,.972,.271,.993,.213,.999],"lineTo",[.211,.999],"bezierCurveTo",[.147,1.004,.094,.989,.054,.952],"bezierCurveTo",[.012,.917,-.006,.871,.002,.816],"bezierCurveTo",[.007,.763,.031,.716,.074,.676],"lineTo",[.078,.674],"bezierCurveTo",[.118,.64,.163,.619,.211,.61],"lineTo",[.213,.61],"lineTo",[.296,.613],"lineTo",[.296,.097],"bezierCurveTo",[.294,.03,.324,-.002,.387,0],"lineTo",[.889,0],"bezierCurveTo",[.963,0,1,.031,1,.094]],LOCK:["moveTo",[.875,.105],"lineTo",[.875,.211],"lineTo",[.75,.211],"lineTo",[.75,.105],"lineTo",[.25,.105],"lineTo",[.25,.474],"lineTo",[1,.474],"lineTo",[1,.947],"bezierCurveTo",[1,.962,.994,.975,.981,.986],"bezierCurveTo",[.969,.995,.954,1,.938,1],"lineTo",[.063,1],"bezierCurveTo",[.045,1,.03,.995,.017,.986],"bezierCurveTo",[.006,.975,0,.962,0,.947],"lineTo",[0,.474],"lineTo",[.125,.474],"lineTo",[.125,.105],"bezierCurveTo",[.125,.076,.137,.052,.161,.032],"bezierCurveTo",[.186,.011,.216,0,.25,0],"lineTo",[.75,0],"bezierCurveTo",[.784,0,.814,.011,.838,.032],"bezierCurveTo",[.863,.053,.875,.077,.875,.105]],WRENCH:["moveTo",[.563,.093],"bezierCurveTo",[.62,.145,.653,.21,.663,.286],"lineTo",[.663,.289],"lineTo",[.663,.291],"lineTo",[.663,.336],"lineTo",[.66,.373],"lineTo",[.939,.651],"bezierCurveTo",[.975,.682,.995,.721,.999,.767],"lineTo",[1,.796],"bezierCurveTo",[1,.854,.981,.903,.941,.942],"lineTo",[.939,.943],"bezierCurveTo",[.903,.981,.854,1,.793,1],"bezierCurveTo",[.737,1,.689,.981,.647,.943],"lineTo",[.647,.942],"lineTo",[.461,.756],"lineTo",[.457,.744],"lineTo",[.364,.656],"lineTo",[.282,.651],"lineTo",[.285,.653],"bezierCurveTo",[.212,.641,.15,.611,.099,.561],"lineTo",[.099,.56],"bezierCurveTo",[.025,.482,-.007,.396,.002,.302],"bezierCurveTo",[.003,.271,.009,.241,.021,.211],"bezierCurveTo",[.023,.204,.026,.2,.032,.197],"lineTo",[.047,.193],"lineTo",[.06,.201],"lineTo",[.238,.381],"lineTo",[.272,.399],"lineTo",[.304,.382],"lineTo",[.304,.381],"lineTo",[.379,.302],"bezierCurveTo",[.394,.287,.398,.271,.391,.255],"lineTo",[.377,.233],"lineTo",[.199,.061],"lineTo",[.193,.049],"bezierCurveTo",[.19,.042,.191,.037,.194,.033],"bezierCurveTo",[.196,.028,.2,.024,.205,.022],"bezierCurveTo",[.219,.015,.232,.009,.244,.005],"lineTo",[.246,.005],"lineTo",[.394,0],"bezierCurveTo",[.459,.012,.515,.042,.564,.093],"lineTo",[.563,.093]],GEAR:["moveTo",[.963,.306],"bezierCurveTo",[.988,.366,1,.43,1,.5],"bezierCurveTo",[1,.51,.996,.519,.989,.527],"bezierCurveTo",[.982,.534,.973,.538,.963,.538],"lineTo",[.859,.538],"lineTo",[.847,.602],"lineTo",[.944,.642],"lineTo",[.964,.663],"bezierCurveTo",[.968,.672,.968,.681,.964,.691],"bezierCurveTo",[.94,.75,.903,.805,.853,.855],"lineTo",[.828,.864],"lineTo",[.802,.855],"lineTo",[.728,.781],"lineTo",[.673,.819],"lineTo",[.714,.914],"bezierCurveTo",[.718,.923,.718,.933,.714,.942],"lineTo",[.694,.963],"bezierCurveTo",[.634,.988,.57,1,.5,1],"bezierCurveTo",[.49,1,.481,.996,.473,.989],"bezierCurveTo",[.466,.982,.463,.973,.463,.963],"lineTo",[.463,.859],"lineTo",[.398,.848],"lineTo",[.359,.944],"lineTo",[.339,.964],"bezierCurveTo",[.33,.968,.32,.968,.311,.964],"bezierCurveTo",[.251,.94,.196,.904,.147,.855],"bezierCurveTo",[.14,.847,.136,.839,.136,.828],"bezierCurveTo",[.136,.818,.14,.809,.147,.802],"lineTo",[.22,.728],"lineTo",[.183,.673],"lineTo",[.086,.714],"bezierCurveTo",[.077,.718,.067,.718,.058,.714],"lineTo",[.038,.694],"bezierCurveTo",[.013,.634,0,.57,0,.5],"bezierCurveTo",[0,.49,.004,.481,.011,.473],"bezierCurveTo",[.018,.466,.027,.463,.038,.463],"lineTo",[.141,.463],"lineTo",[.153,.398],"lineTo",[.056,.359],"lineTo",[.036,.339],"bezierCurveTo",[.032,.33,.032,.32,.036,.311],"bezierCurveTo",[.06,.251,.097,.196,.147,.147],"bezierCurveTo",[.154,.14,.163,.136,.172,.136],"bezierCurveTo",[.182,.136,.191,.14,.198,.147],"lineTo",[.272,.22],"bezierCurveTo",[.29,.206,.308,.193,.327,.183],"lineTo",[.286,.086],"bezierCurveTo",[.282,.077,.282,.067,.286,.058],"bezierCurveTo",[.29,.048,.297,.042,.306,.038],"bezierCurveTo",[.366,.013,.43,0,.5,0],"bezierCurveTo",[.51,0,.519,.004,.527,.011],"bezierCurveTo",[.534,.018,.538,.027,.538,.038],"lineTo",[.538,.141],"lineTo",[.602,.153],"lineTo",[.642,.056],"bezierCurveTo",[.645,.047,.652,.04,.661,.036],"bezierCurveTo",[.67,.032,.68,.032,.691,.036],"bezierCurveTo",[.729,.052,.766,.073,.802,.1],"lineTo",[.853,.147],"bezierCurveTo",[.86,.154,.864,.163,.864,.173],"lineTo",[.853,.198],"lineTo",[.781,.272],"lineTo",[.817,.327],"lineTo",[.914,.286],"bezierCurveTo",[.923,.282,.933,.282,.942,.286],"lineTo",[.963,.306]],AWARD:["moveTo",[1,.352],"bezierCurveTo",[1,.449,.951,.532,.854,.601],"bezierCurveTo",[.81,.633,.761,.658,.708,.676],"lineTo",[.708,.973],"lineTo",[.698,.993],"lineTo",[.671,1],"lineTo",[.644,.994],"lineTo",[.5,.892],"lineTo",[.356,.994],"lineTo",[.329,1],"lineTo",[.302,.993],"lineTo",[.292,.973],"lineTo",[.292,.677],"bezierCurveTo",[.237,.659,.187,.633,.142,.601],"bezierCurveTo",[.047,.532,0,.449,0,.352],"bezierCurveTo",[0,.254,.047,.17,.142,.102],"bezierCurveTo",[.239,.034,.358,0,.5,0],"bezierCurveTo",[.639,0,.757,.034,.854,.102],"bezierCurveTo",[.951,.17,1,.254,1,.352]],AWARD2:["moveTo",[.902,.359],"bezierCurveTo",[.902,.439,.876,.51,.825,.572],"lineTo",[.827,.574],"lineTo",[.995,.838],"lineTo",[1,.857],"lineTo",[.983,.874],"lineTo",[.962,.878],"lineTo",[.805,.841],"lineTo",[.764,.982],"lineTo",[.747,.997],"lineTo",[.725,1],"lineTo",[.707,.988],"lineTo",[.539,.724],"lineTo",[.537,.719],"lineTo",[.502,.721],"lineTo",[.465,.719],"lineTo",[.462,.724],"lineTo",[.294,.988],"lineTo",[.275,1],"lineTo",[.254,.997],"lineTo",[.237,.982],"lineTo",[.195,.841],"lineTo",[.039,.878],"lineTo",[.017,.874],"lineTo",[0,.857],"bezierCurveTo",[-.001,.85,.001,.844,.005,.838],"lineTo",[.174,.574],"lineTo",[.177,.571],"bezierCurveTo",[.127,.51,.102,.439,.102,.359],"bezierCurveTo",[.102,.259,.14,.174,.215,.104],"bezierCurveTo",[.293,.035,.389,0,.502,0],"bezierCurveTo",[.613,0,.707,.035,.785,.104],"bezierCurveTo",[.863,.174,.902,.259,.902,.359]],HAND:["moveTo",[-.022,-.537],"bezierCurveTo",[-.118,-.449,-.198,-.6,-.248,-.627],"bezierCurveTo",[-.27,-.639,-.306,-.648,-.325,-.631],"bezierCurveTo",[-.344,-.612,-.331,-.577,-.329,-.551],"bezierCurveTo",[-.316,-.423,-.275,-.297,-.277,-.168],"bezierCurveTo",[-.278,-.138,-.306,-.101,-.337,-.098],"bezierCurveTo",[-.368,-.094,-.402,-.124,-.413,-.153],"bezierCurveTo",[-.449,-.249,-.448,-.354,-.47,-.453],"bezierCurveTo",[-.509,-.631,-.396,0,-.567,0],"bezierCurveTo",[-.597,0,-.631,-.032,-.635,-.062],"bezierCurveTo",[-.655,-.191,-.634,-.324,-.636,-.455],"bezierCurveTo",[-.638,-.568,-.634,-.073,-.781,-.097],"bezierCurveTo",[-.812,-.102,-.836,-.141,-.836,-.171],"bezierCurveTo",[-.836,-.292,-.798,-.41,-.782,-.53],"bezierCurveTo",[-.773,-.6,-.827,-.393,-.868,-.336],"bezierCurveTo",[-.9,-.29,-1.02,-.261,-.997,-.377],"bezierCurveTo",[-.945,-.64,-.882,-.928,-.567,-.996],"bezierCurveTo",[-.484,-1.014,-.396,-.966,-.325,-.921],"bezierCurveTo",[-.209,-.849,-.101,-.758,-.017,-.651],"bezierCurveTo",[.007,-.621,.006,-.563,-.022,-.537]]};AFRAME.registerGeometry("extrudeShape",{schema:{icon:{default:"HEART"}},init(a){const b=c[a.icon],d=new THREE.Shape;for(let c=0;c<b.length;c+=2){const a=b[c],e=b[c+1];d[a].apply(d,e)}const e=new THREE.ExtrudeGeometry(d,{depth:.15,bevelEnabled:!1});e.rotateX(3.14159),this.geometry=e}}),AFRAME.registerComponent("orbit",{schema:{startTheta:{default:0},deltaTheta:{type:"number"},radius:{type:"number"},active:{default:!0},center:{type:"vec3",default:{x:0,y:0,z:0}}},init:function(){this.theta=this.data.startTheta},tick(a,b){if(!this.data.active)return;const{center:c,deltaTheta:d,radius:e}=this.data,{position:f}=this.el.object3D,{theta:g}=this,h=c.x+e*Math.cos(g),i=c.y+e*Math.sin(g);this.theta+=d,f.set(h,f.y,i)}});const d=["#001f3f","#7FDBFF","#3D9970","#01FF70","#FF851B","#85144b","#B10DC9"];AFRAME.registerComponent("selectable",{schema:{},init:function(){this.system=this.el.sceneEl.systems.game,this.lastIndex=-1,["click","triggerdown"].forEach(a=>{this.el.addEventListener(a,this)})},handleEvent(a){console.log("selectable",a.type,a);const{lastIndex:b}=this;let c=b;for(;c===b;)c=THREE.Math.randInt(0,d.length-1);this.el.setAttribute("material","color",d[c]),this.lastIndex=c,this.system.setSelected(this.el)}}),AFRAME.registerComponent("float-to",{schema:{targetPosition:{type:"vec3"},speed:{type:"number"},active:{default:!0}},init(){this.startingPosition=new THREE.Vector3,this.targetPosition=new THREE.Vector3,this.direction="target",this.el.object3D.getWorldPosition(this.startingPosition)},tick(a,b){if(!this.data.active)return;const{speed:c}=this.data,{targetPosition:d,direction:e}=this,f=this.el.object3D.position.distanceToSquared(d);this.el.object3D.lookAt(d),this.el.object3D.translateZ(c),f<=c&&("target"===e?(this.targetPosition.copy(this.startingPosition),this.direction="starting",this.el.emit("float-at-target",{el:this.el})):(this.el.removeAttribute("float-to"),this.el.emit("float-completed",{el:this.el})))}});class e{constructor(){const b=this.elCamera=document.querySelector("#camera"),c=this.elLeftHand=document.querySelector("#leftHand");this.el=document.createElement("a-entity"),b.appendChild(this.el),a(this.el,f),window.addEventListener("gamepadconnected",()=>{this.el.remove(),this.el=document.createElement("a-entity"),a(this.el,g),c.appendChild(this.el),c.removeAttribute("position")})}}const f={cursor:{rayOrigin:"mouse"},position:{x:0,y:0,z:-1},geometry:{primitive:"ring",radiusInner:.02,radiusOuter:.03},material:{color:"black",shader:"flat"},raycaster:{objects:"[selectable]"}},g={"laser-controls":{model:!1},raycaster:{objects:"[selectable]"},line:{color:"red",opacity:.75}};class h{constructor(a={}){this.sceneEl=document.querySelector("a-scene"),this.el=document.createElement("a-entity"),this.el.setAttribute("position",{x:a.x,y:a.y,z:a.z}),this.el.innerHTML=`
      <a-entity
        rotation="90 0 0"
        position="0 1 0"
        scale="0.25 0.25 0.25"
        geometry="primitive: extrudeShape; icon: ${a.icon}"
        material="color: #7FDBFF; transparent: true; opacity: 0.5;"
        selectable
        class="goal"
        ></a-entity>
    `,this.sceneEl.appendChild(this.el)}}class i{constructor(b={}){var c=Math.PI;this.scene=document.querySelector("a-scene"),this.el=document.createElement("a-entity"),this.el.classList.add("item"),this.state={selectable:{},orbit:{radius:THREE.Math.randInt(3,6),startTheta:THREE.Math.randFloat(0,2*c),deltaTheta:(0===THREE.Math.randInt(0,1)?1:-1)*(2*c/Math.pow(10,THREE.Math.randFloat(3,4)))},position:{x:b.x||0,y:b.y||0,z:b.z||0},rotation:{x:0,y:0,z:0},geometry:{primitive:"extrudeShape",icon:b.shape},material:{opacity:1,shader:"standard"},visible:!0},a(this.el,this.state),this.scene.appendChild(this.el)}}const j=Object.keys(c),k=()=>j[THREE.Math.randInt(0,j.length-1)],l=3;AFRAME.registerSystem("game",{schema:{},init(){this.items=[],this.goals=[],this.controller=new e,this.elLeftHand=document.querySelector("#leftHand"),this.state={selectedItem:null,selectedGoal:null},this.startGame()},setSelected(a){const{selectedGoal:b,selectedItem:c}=this.state,d=a.classList.contains("goal");if(d){if(!this.updateSelected("selectedGoal",a))return;}else if(!this.updateSelected("selectedItem",a))return;null!==this.state.selectedGoal&&null!==this.state.selectedItem&&(this.state.selectedItem.setAttribute("orbit",{active:!1}),this.state.selectedItem.setAttribute("float-to",{targetPosition:this.state.selectedGoal.getAttribute("position"),speed:.05}))},updateSelected(a,b){if(b===this.state[a])return!1;const c=this.state[a];return c&&c.emit("unselected"),this.state[a]=b,b.emit("selected"),!0},startGame(){this.items=[],this.goals=[];for(let a=0;a<l;a++)for(let b=0;b<l;b++)this.goals.push(this.createNewGoal(a,b));this.items=this.items.concat(this.goals);for(let a=0;a<30;a++)this.items.push(this.createNewItem())},createNewItem(){const a=new i({x:0,y:THREE.Math.randInt(2,4),z:0,shape:k()});["float-at-target","float-completed"].forEach(b=>a.el.addEventListener(b,this))},createNewGoal(a,b){new h({x:-.75+.5*a,y:.1,z:-.5+.5*b,icon:k()})},handleEvent(a){console.log("game.handleEvent",a.type,a)}})})();</script><body><a-scene><a-entity id=player><a-entity id=camera position="0 1.6 0" camera look-controls wasd-controls></a-entity><a-entity id=leftHand position="0 1 -0.25"></a-entity></a-entity><a-sky color=#7FDBFF></a-sky><a-plane color=#3D9970 height=100 rotation="-90 0 0" width=100></a-plane></a-scene>