<!doctype html><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=yes name=apple-mobile-web-app-capable><meta content=$pay.stronghold.co/1a136a73a59d52b475b94e49fdea69dae89 name=monetization><title>JS13KGame 2019: Theme Back!</title><script src=https://aframe.io/releases/0.9.2/aframe.min.js></script><style>body,html{width:100%;height:100%;margin:0;padding:0}body{background-color:#0074d9}</style><body><a-scene><a-entity id=player><a-entity id=camera camera look-controls position="0 1.6 0" wasd-controls></a-entity><a-entity id=leftHand></a-entity></a-entity></a-scene><script>(function(){'use strict';function a(a,e){const f=a.getAttributeNames(),g=d(f,e);c(a,g),b(a,e)}function b(a,b){Object.keys(b).forEach(c=>{const d=b[c];a.setAttribute(c,d)})}function c(a,b){b.forEach(b=>a.removeAttribute(b))}function d(a,b){return a.filter(a=>!b.hasOwnProperty(a))}AFRAME.registerGeometry("extrudeShape",{schema:{vertices:{default:["-1 1 0","-1 -1 0","1 -1 0"]}},init(a){const b=new THREE.Shape;var c=new THREE.ExtrudeGeometry(b,{depth:.15,bevelEnabled:!1});c.rotateX(3.14159),c.computeBoundingBox(),c.mergeVertices(),this.geometry=c}});const e=["#001f3f","#7FDBFF","#3D9970","#01FF70","#FF851B","#85144b","#B10DC9"];AFRAME.registerComponent("cursor-listener",{init:function(){this.lastIndex=-1,["click","triggerdown"].forEach(a=>{this.el.addEventListener(a,this)})},handleEvent(a){let{lastIndex:b}=this;b=(b+1)%e.length,this.el.setAttribute("material","color",e[b]),this.lastIndex=b}});class f{constructor(){const b=this.elCamera=document.querySelector("#camera"),c=this.elLeftHand=document.querySelector("#leftHand");this.el=document.createElement("a-entity"),b.appendChild(this.el),a(this.el,g),window.addEventListener("gamepadconnected",()=>{this.el.remove(),this.el=document.createElement("a-entity"),a(this.el,h),c.appendChild(this.el)})}}const g={cursor:{fuse:!0,fuseTimeout:500},position:{x:0,y:0,z:-1},geometry:{primitive:"ring",radiusInner:.02,radiusOuter:.03},material:{color:"black",shader:"flat"},raycaster:{objects:"[cursor-listener]"}},h={"laser-controls":{model:!1},raycaster:{objects:"[cursor-listener]"},line:{color:"red",opacity:.75}};class i{constructor(b,c,d,e){this.scene=document.querySelector("a-scene"),this.el=document.createElement("a-entity"),this.props={"cursor-listener":"cursor-listener",position:{x:b||0,y:c||0,z:d||0},rotation:{x:b||0,y:c||0,z:d||0},geometry:{primitive:"box",width:e.width||1,height:e.height||1,depth:e.depth||1},material:{opacity:1,shader:"standard"},visible:!0},a(this.el,this.props),this.el.className="box",this.scene.appendChild(this.el)}update(b,c){let{rotation:d}=this.props;d.y+=.01*c,this.rotation=d,a(this.el,this.props)}}class j{constructor(){this.scene=document.querySelector("a-scene"),this.el=document.createElement("a-entity"),a(this.el,k),this.scene.appendChild(this.el)}update(){}}const k={geometry:{primitive:"plane",width:10,height:10},rotation:{x:-90,y:0,z:0}};class l{constructor(b,c,d){this.scene=document.querySelector("a-scene"),this.el=document.createElement("a-entity"),this.state={"cursor-listener":"cursor-listener",position:{x:b||0,y:c||0,z:d||0},rotation:{x:0,y:0,z:0},geometry:{primitive:"extrudeShape",vertices:["-1 1 0","-1 -1 0","1 -1 0"]},material:{opacity:1,shader:"standard"},visible:!0},a(this.el,this.state),this.scene.appendChild(this.el)}update(){}}AFRAME.registerSystem("game",{schema:{},init(){this.controller=new f,this.entities=[new i(0,2,-5,{width:2,height:2,depth:2}),new l(-10,2,-5),new j]},tick(a,b){this.entities.forEach(c=>c.update(a,b))}})})();</script>