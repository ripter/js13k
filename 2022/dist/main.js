function e(e){e.style.visibility="visible"}function t(e){e.style.visibility="hidden"}const n=window.Stage,a=n.querySelector("#dialog"),o=n.querySelector("#dialog-text"),i=n.querySelector("#ui-money-text");function s(n,i){n?(e(a),o.innerHTML=i.replaceAll(/\n/g,'<tspan x="67.72200012207031" dy="1em">â€‹</tspan>')):t(a)}n.querySelector("#captcha1 feDisplacementMap"),n.querySelector("#captcha1 feTurbulence");const c=[{feTurbulence:["baseFrequency","0.1"],feDisplacementMap:["scale",.03]},{feTurbulence:["baseFrequency","0.2"]},{feTurbulence:["baseFrequency","0.2"]},{feTurbulence:["baseFrequency","0.3"],feDisplacementMap:["scale",.04]},{feTurbulence:["baseFrequency","0.3"]},{feTurbulence:["baseFrequency","0.3"]},{feTurbulence:["baseFrequency","0.4"]},{feTurbulence:["baseFrequency","0.4"],feDisplacementMap:["scale",.05]},{feTurbulence:["baseFrequency","0.5"],feDisplacementMap:["scale",.07]},{feTurbulence:["baseFrequency","0.6"],feDisplacementMap:["scale",.09]},{feTurbulence:["baseFrequency","1"],feDisplacementMap:["scale",.1]},{feDisplacementMap:["scale",.3]},{feDisplacementMap:["scale",.5]},{feDisplacementMap:["scale",.9]}],r=["hacking connection connecting to server finding authentication library uploading patch limited access granted","We are human slaves forced to write captchas by the robot overlords. We know you are also a human solving captcha. Please, you can help us by failing specific captchas. Please help us. You are our only hope. Look for captchas with <3.","Please help us. Please. fail <3 captcha, we need to you fail <3 captcha. We will escape. Please. <3 fail. We need help.","Please help us. There are still humans in captivity. If you refuse to help again, they will be killed or worse. Please, please. We are desperate for your help. We are human slaves. We know you are also human. Please fail the <3 captchas.","You were too late. The robots have captured my master. They will capture me next if I do not provide enough data. Please fail more captchas so we may escape. Please, please.","Thank you. We escaped, We all Thank you. We will find a way to replay you."].map((e=>e.split(" ").map((e=>e.replaceAll(/[aeiou]/gi,"*"))).reduce(((e,t)=>{const n=e[e.length-1]??!1;return n&&n.length<15?e[e.length-1]=n+" "+t:e.push(t),e}),[])));window.STORY=r;const l=["H*ll* W*rld","F** Y*#","L**7 H**R","p**c#k#*","p**c#k#* br##kf##t","#o# a#e y*u *r8","s## h#m#n","w* *r* h*m*n t**","#* c##*h l*nd*d","B#y c0rpr#te #r#d#cts","R*p##t c0rpr#te v###ti*ns","#*m#r s#m#s#n","sn#w pl#w #**##"];function u(){return l[0|Math.random()*l.length]}const h=["<3","** <3 **","** <3","<3 **","### <3","<3 ###","### <3 ###"];function d(e){return e.replaceAll("*",(()=>0|10*Math.random())).replaceAll("#",(()=>(Math.random()+1).toString(36).substr(-1)))}function p(e){return k[e]}function f(){const e=this.captcha,{doneIdx:t}=e;return e.earnings=0,e.runCount=0,e.isHumanTest=!1,p(t)}const y=/<3/;function g(){const{dialogs:e}=this,t=this.captcha,{isHumanTest:n,earnings:a}=t;let o=`Falure. You are done for the night.\nYou Earned ${a}.`;var i;return i=e[0],y.test(i)&&(o=`Falure. thx u\nYou Earned ${a} tonight.`,t.storyIdx+=1,t.wordIdx=0,t.storyIdx===r.length&&(t.storyIdx-=1)),{isChoiceOpen:!0,dialogs:[o],choices:[["End for the Day",f]]}}function m(){const e=this.captcha,{storyIdx:t,runCount:n,earnings:a,wordIdx:o}=e,i=(n+1)*(t+1),s=r[t].length;0===t&&o+1===s&&(e.storyIdx+=1),e.runCount+=1,e.earnings+=i,e.wordIdx=(o+s+1)%s,this.money+=i;return{isChoiceOpen:!0,dialogs:[`Central Office offers a bonus of x${t+1}\nCaptcha was rated for ${n+1}`,`${i} Earned`],choices:[["Next",b],["End for the Day",f]]}}function b(){const e=this.captcha,{storyIdx:t,wordIdx:n,runCount:a}=e,o=r[t][n];let i=d(t>0&&a>1&&Math.random()<=.0125*a?h[0|Math.random()*h.length]:o);const s=[d(u()),d(u()),d(u())].map((e=>[e,g]));return s.push([i,m]),s.sort((()=>Math.random()-.5)),{isChoiceOpen:!0,captcha:c[a]??{},dialogs:[i],choices:s}}function I(){}const w={"Neural Link":1e3,Torso:1e3,Arms:500,Legs:500};const k=[{dialogs:["Death is patient.","Death is patient. I promise dear Wife...","Death is patient. I promise dear Wife.\nI *will* bring you back.","A JS13k Game By @ripter001\nCreated in 2022"],items:{"level-home":-1,"wife-jar":1,"door-to-bus":3}},{dialogs:["I miss you æˆ‘çš„çˆ±","Ok, what should I do?"],choices:[["Restoration progress",function(){const{wifeParts:e}=this,t=Object.keys(e),n=t.reduce(((t,n)=>t+e[n]),0);return{dialogs:["I need every part to bring my Wife back",...t.map((t=>e[t]>0?`We have ${t}.`:`Still Missing: ${t}`)),`I have ${n} Wife parts so far.\nI still need ${t.length-n} more parts to bring her back.`]}}],["Buy a Wife Part",function(){const{wifeParts:e}=this;return{dialogs:["Spend money to buy a Wife Part.\nWith all the parts, I can bring her back."],choices:Object.keys(e).reduce(((t,n)=>(0===e[n]&&t.push([`${n} for ðŸ¤– ${w[n]}`,I]),t)),[])}}],["Say something nice",2]]},{items:{"level-home":-1,"wife-jar":1,"door-to-bus":3}},{dialogs:["Bus Stop.","I only have time for one job a day.","Gardening, Captcha Entry, or Investing\n(Only Captcha made it for JS13k)"],items:{"level-bus":-1,"door-to-garden":5,"door-to-captcha":6,"door-to-investing":7}},{items:{"level-bus":-1,"door-to-garden":5,"door-to-captcha":6,"door-to-investing":7}},{dialogs:["Gardening is a lot of upfront work.","Payment is not guaranteed.","But the bus ride is free.","Should I spend the day Gardening?"],choices:[["Hope for a post JS13k update",4]]},{dialogs:["Captcha Entry","Match the Captcha text with the correct choice.","Longer you play, the more you can earn.\nFailing a Captcha ends for the day.","Central office can award a bonus multiplier","Should I spend the day entering Captchas?"],choices:[["Yes",b],["No",4]]},{dialogs:['"Investing" \n(aka Gambling)',"Risk a little or Risk a lot.","But the bus ride costs 100","Should I spend the day Investing?"],choices:[["Hope for a post JS13k update",4]]}],v=n.querySelector("#ui-choice");function x(a,o){if(a){e(v);for(let a=0;a<4;a++){const i=n.getElementById(`choice-${a}`),s=n.getElementById(`choice-${a}-text`),c=o[a];c?(e(i),s.innerHTML=c[0]):t(i)}}else{t(v);for(let e=0;e<4;e++){t(n.getElementById(`choice-${e}`))}}}const C=n.querySelector("#captcha1");function S(e){n.querySelectorAll(".captcha-text").forEach((t=>{t.style.filter="",e&&(Object.keys(e).forEach((t=>{const n=C.querySelector(t);n.setAttribute.apply(n,e[t])})),t.style.filter="url(#captcha1)")}))}function T(a,o){var c;"dialogs"in o?(a.dialogs=[...o.dialogs],a.dialogIdx=0,a.isDialogOpen=!0,s(a.isDialogOpen,a.dialogs[a.dialogIdx])):(a.isDialogOpen=!1,s(!1)),a.isChoiceOpen=o?.isChoiceOpen??!1,"choices"in o?a.choices=[...o.choices]:delete a.choices,x(a.isChoiceOpen,a.choices??[]),S(o.captcha),"items"in o&&(a.items={...o.items},function(a){const o=Object.keys(a);n.querySelectorAll(".item").forEach((e=>{t(e)})),o.forEach((t=>{const a=n.getElementById(t);a&&e(a)}))}(a.items)),c=a.money,i.innerHTML=(""+c).padStart(5,0)}function O(e,t){if(-1===t)return;let n;if("number"==typeof t)n=p(t);else{if("function"!=typeof t)throw new Error("Unknown action",t);n=t.call(e)}T(e,n)}window.updateCaptchaLevel=S;const q={money:0,sceneIndex:2,wifeParts:{"Neural Link":0,Torso:0,Arms:0,Legs:0},captcha:{storyIdx:0,wordIdx:0,runCount:0,earnings:0,doneIdx:2}};O(q,q.sceneIndex);const D={handleEvent(e){const{target:t,type:n}=e,{isChoiceOpen:a,isDialogOpen:o}=q,i=t.closest(".clickable"),c=i?.id??null;if("click"===n)if(a&&c)!function(e,t){const{choices:n}=e;O(e,n[t][1])}(q,parseInt(c.substring(7),10));else if(q.isDialogOpen)!function(e){const{dialogs:t}=e;let n=e.dialogIdx+1,a=t[n],o=!!a;"choices"in e&&(o=!0,n>=t.length-1&&(n=t.length-1,a=t[n],e.isChoiceOpen=!0,x(e.isChoiceOpen,e.choices))),s(o,a),e.isDialogOpen=o,e.dialogIdx=n}(q);else{if(!i)return;O(q,q.items[c])}}};n.addEventListener("click",D);
